<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Is Hunter Okay?</title>
  <meta name="description" content="ishunterokay.com ‚Äî a very serious status page." />

  <!-- Inline favicon (prevents /favicon.ico 404) -->
  <link rel="icon" type="image/svg+xml"
        href='data:image/svg+xml;utf8,
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64">
  <rect rx="12" ry="12" x="2" y="2" width="60" height="60" fill="%23141420"/>
  <path d="M20 34l7 7 17-18" fill="none" stroke="%233ad29f" stroke-width="6" stroke-linecap="round" stroke-linejoin="round"/>
</svg>' />

  <!-- Social preview -->
  <meta property="og:title" content="Is Hunter Okay?">
  <meta property="og:description" content="A synthwave vibe-check powered by vibes, weather, and caffeine.">
  <meta property="og:type" content="website">

  <style>
    :root{
      --bg:#0b0b10;
      --card:#141420;
      --ink:#e8e8ff;
      --muted:#a6a6c9;
      --accent:#7c5cff;
      --good:#3ad29f;  /* mint */
      --warn:#ffcf5c;
      --bad:#ff6b6b;
      --chip:#10101a;
      --border:#26263a;
      --chipBorder:#1e2030;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif,system-ui,Segoe UI,Roboto,Helvetica,Arial,Apple Color Emoji,Segoe UI Emoji;
      color:var(--ink);
      background:
        radial-gradient(1200px 800px at 20% -10%, #1a1a2e 0%, transparent 60%),
        radial-gradient(900px 600px at 120% 10%, #221a36 0%, transparent 60%),
        var(--bg);
      display:flex; align-items:center; justify-content:center; padding:28px;
    }
    .wrap{width:min(980px,100%)}
    .card{
      position:relative;
      background:var(--card);
      border:1px solid var(--border);
      border-radius:24px;
      padding:32px;
      box-shadow:0 24px 80px rgba(0,0,0,.38);
    }
    /* Soft aurora glow */
    .card::before{
      content:""; position:absolute; inset:-40px; z-index:-1;
      background:
        radial-gradient(600px 260px at 15% 0%,rgba(124,92,255,.18),transparent 60%),
        radial-gradient(420px 220px at 85% 20%,rgba(58,210,159,.14),transparent 60%);
      filter: blur(20px);
    }

    header{
      display:flex; align-items:center; justify-content:space-between; gap:16px; margin-bottom:10px;
    }
    header h1{
      margin:0; font-size:16px; font-weight:600; color:var(--muted); letter-spacing:.25px;
    }
    .actions{display:flex; gap:8px; align-items:center}
    button{
      appearance:none; border:1px solid var(--border); background:#18182a; color:var(--ink);
      padding:8px 12px; border-radius:12px; cursor:pointer; font-size:14px; line-height:1;
    }
    button:hover{border-color:#343456}

    .answer{
      font-size: clamp(72px, 9.5vw, 120px);
      line-height:1.0; font-weight:900; letter-spacing:-.02em; margin:12px 0 8px;
      text-shadow:0 2px 0 rgba(0,0,0,.15);
    }
    .answer.ok{ color: var(--good); }
    .answer.warn{ color: var(--warn); }
    .answer.bad{ color: var(--bad); }

    /* Animated gradient headline when OK */
    .answer.ok.gradient{
      background: linear-gradient(90deg, var(--good), var(--accent), var(--good));
      -webkit-background-clip:text; background-clip:text; color:transparent;
      background-size:200% 100%;
      animation: shine 6s linear infinite;
      text-shadow:none; /* gradient text looks cleaner without shadow */
    }
    @keyframes shine { 0%{background-position:0 0} 100%{background-position:200% 0} }

    .message{
      font-size: clamp(18px, 2.4vw, 24px);
      color: var(--ink);
      opacity:.95;
      margin: 4px 0 16px;
    }
    .meta{
      display:flex; gap:12px; flex-wrap:wrap; align-items:center; color:var(--muted);
      font-size:14px; margin:6px 0 14px;
    }
    /* quick pulse for "Updated..." */
    .pulse { animation:pulse 2s ease-out 1; }
    @keyframes pulse { 0%{opacity:.4} 100%{opacity:1} }

    .chips{
      display:flex; flex-wrap:wrap; gap:10px; margin-top:10px;
    }
    .chip{
      background:var(--chip);
      border:1px solid var(--chipBorder);
      padding:8px 12px;
      border-radius:999px;
      font-size:14px;
      color:#cfd0ff;
      box-shadow: inset 0 1px 0 rgba(255,255,255,.04);
      white-space:nowrap;
    }

    /* Admin panel (hidden by default) */
    .admin{ margin-top:18px; display:none; }
    .admin.open{display:block;}
    .grid{ display:grid; gap:12px; grid-template-columns: 1fr; }
    .row{ display:grid; gap:8px; }
    label{font-size:13px; color:var(--muted)}
    input[type="text"], input[type="datetime-local"], textarea{
      width:100%; padding:10px 12px; border-radius:12px; border:1px solid var(--border);
      background:#0f0f1a; color:var(--ink); font-size:14px;
    }
    .inline{display:flex; gap:8px; flex-wrap:wrap; align-items:center}
    .export{
      width:100%; min-height:120px; font-family: ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
    }
    .hr{height:1px; background:var(--border); margin:16px 0}
    .footer-note{ margin-top:10px; color:var(--muted); font-size:12px; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <header>
        <h1>ishunterokay.com</h1>
        <div class="actions">
          <button id="refreshBtn" title="Reload status.json">‚Üª Refresh</button>
          <button id="adminToggleBtn" title="Open local editor">‚öôÔ∏è Admin</button>
        </div>
      </header>

      <div id="status">
        <div id="answer" class="answer ok gradient">Yes</div>
        <div id="message" class="message">Hunter shipped a feature and touched grass.</div>
        <div class="meta"><span id="updated">Updated just now</span></div>
        <div id="chips" class="chips"></div>
      </div>

      <div class="admin" id="adminPanel" aria-hidden="true">
        <div class="hr"></div>
        <div class="grid">
          <div class="row">
            <label for="answerInput">Answer (e.g., "Yes", "No", "Kinda")</label>
            <input id="answerInput" type="text" placeholder="Yes" />
          </div>
          <div class="row">
            <label for="messageInput">Message</label>
            <textarea id="messageInput" rows="3" placeholder="Sipping coffee, plotting charts."></textarea>
          </div>
          <div class="row">
            <label for="updatedInput">Updated (ISO or pick a time)</label>
            <input id="updatedInput" type="datetime-local" />
          </div>
          <div class="row">
            <label>Chips (tags)</label>
            <div class="inline" id="chipsEditor"></div>
            <div class="inline">
              <button id="addChipBtn" type="button">+ Add tag</button>
              <button id="clearChipsBtn" type="button">Clear tags</button>
            </div>
          </div>
          <div class="row inline">
            <button id="applyBtn" type="button">Apply locally</button>
            <button id="makeJsonBtn" type="button">Generate status.json</button>
            <button id="copyJsonBtn" type="button">Copy to clipboard</button>
          </div>
          <div class="row">
            <label for="exportBox">status.json (save this next to index.html)</label>
            <textarea id="exportBox" class="export" readonly></textarea>
          </div>
          <div class="footer-note">
            Tip: Save the JSON above as <code>/status.json</code> in your static host. The page will auto-load it at runtime.
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
  (function () {
    "use strict";

    const els = {
      answerEl: document.getElementById("answer"),
      messageEl: document.getElementById("message"),
      updatedEl: document.getElementById("updated"),
      chipsEl: document.getElementById("chips"),
      refreshBtn: document.getElementById("refreshBtn"),
      adminToggleBtn: document.getElementById("adminToggleBtn"),
      adminPanel: document.getElementById("adminPanel"),
      answerInput: document.getElementById("answerInput"),
      messageInput: document.getElementById("messageInput"),
      updatedInput: document.getElementById("updatedInput"),
      chipsEditor: document.getElementById("chipsEditor"),
      addChipBtn: document.getElementById("addChipBtn"),
      clearChipsBtn: document.getElementById("clearChipsBtn"),
      applyBtn: document.getElementById("applyBtn"),
      makeJsonBtn: document.getElementById("makeJsonBtn"),
      copyJsonBtn: document.getElementById("copyJsonBtn"),
      exportBox: document.getElementById("exportBox")
    };

    // Fun quips when no status.json is found
    const QUIPS = [
      "Touching grass üåø",
      "Refactoring feelings",
      "Shipping pixels",
      "Wrangling DAX",
      "Hydrating and debugging",
      "Consulting with the vibe committee"
    ];

    const defaults = {
      answer: "Yes",
      message: QUIPS[Math.floor(Math.random()*QUIPS.length)],
      updated: new Date().toISOString(),
      chips: ["Weather: sunny","Spotify: Synthwave Flow","Sleep: 7.2h"]
    };

    let state = { ...defaults };

    function clsForAnswer(a) {
      const s = String(a || "").toLowerCase();
      if (["yes","y","ok","okay","probably"].some(t => s.startsWith(t))) return "ok";
      if (["kinda","maybe","unsure","meh"].some(t => s.includes(t))) return "warn";
      if (["no","n","nope"].some(t => s.startsWith(t))) return "bad";
      return "ok";
    }
    function fmtWhen(iso) {
      const d = new Date(iso);
      if (isNaN(d.getTime())) return "Updated: unknown";
      const diff = Math.max(0, Math.floor((Date.now() - d.getTime()) / 1000));
      if (diff < 60) return "Updated just now";
      if (diff < 3600) { const m = Math.floor(diff/60); return `Updated ${m} minute${m===1?"":"s"} ago`; }
      if (diff < 86400) { const h = Math.floor(diff/3600); return `Updated ${h} hour${h===1?"":"s"} ago`; }
      return "Updated " + d.toLocaleString();
    }
    function iconFor(text){
      const t = String(text).toLowerCase();
      if (t.includes("weather")) return "‚òÄÔ∏è ";
      if (t.includes("spotify") || t.includes("music")) return "üéß ";
      if (t.includes("sleep")) return "üò¥ ";
      if (t.includes("coffee") || t.includes("caffeine")) return "‚òï ";
      return "‚Ä¢ ";
    }

    function render(data) {
      const { answer, message, updated, chips } = data;

      // Answer
      const statusCls = clsForAnswer(answer);
      els.answerEl.textContent = answer || "Unknown";
      els.answerEl.className = "answer " + statusCls + (statusCls === "ok" ? " gradient" : "");

      // Message
      els.messageEl.textContent = message || "";

      // Updated
      els.updatedEl.textContent = fmtWhen(updated);
      els.updatedEl.classList.remove("pulse");
      // trigger a quick pulse each render (esp. after refresh/apply)
      requestAnimationFrame(()=> {
        els.updatedEl.classList.add("pulse");
        setTimeout(()=>els.updatedEl.classList.remove("pulse"), 2000);
      });

      // Chips
      els.chipsEl.innerHTML = "";
      (Array.isArray(chips) ? chips : []).forEach(text => {
        const s = document.createElement("span");
        s.className = "chip";
        s.textContent = iconFor(text) + String(text);
        els.chipsEl.appendChild(s);
      });

      // Sync admin inputs
      els.answerInput.value = answer || "";
      els.messageInput.value = message || "";
      const dt = new Date(updated || Date.now());
      if (!isNaN(dt.getTime())) {
        const pad = n => String(n).padStart(2,"0");
        els.updatedInput.value = `${dt.getFullYear()}-${pad(dt.getMonth()+1)}-${pad(dt.getDate())}T${pad(dt.getHours())}:${pad(dt.getMinutes())}`;
      } else { els.updatedInput.value = ""; }

      rebuildChipsEditor(chips);
    }

    function rebuildChipsEditor(chips) {
      els.chipsEditor.innerHTML = "";
      const arr = Array.isArray(chips) ? chips : [];
      arr.forEach((val, idx) => {
        const row = document.createElement("div");
        row.className = "inline";
        const input = document.createElement("input");
        input.type = "text"; input.value = String(val); input.dataset.index = String(idx);
        const del = document.createElement("button");
        del.textContent = "‚úï"; del.type = "button";
        del.addEventListener("click", () => {
          const next = (state.chips || []).slice(); next.splice(idx,1);
          state = { ...state, chips: next }; render(state);
        });
        row.appendChild(input); row.appendChild(del);
        els.chipsEditor.appendChild(row);
        input.addEventListener("input", () => {
          const next = (state.chips || []).slice(); next[idx] = input.value;
          state = { ...state, chips: next };
        });
      });
    }

    function collectFromAdmin() {
      const a = els.answerInput.value.trim() || "Yes";
      const m = els.messageInput.value.trim();
      const uRaw = els.updatedInput.value; // datetime-local
      const u = uRaw ? new Date(uRaw) : new Date();
      const chips = [];
      els.chipsEditor.querySelectorAll('input[type="text"]').forEach(inp => {
        const v = inp.value.trim(); if (v) chips.push(v);
      });
      return {
        answer: a,
        message: m || QUIPS[Math.floor(Math.random()*QUIPS.length)],
        updated: isNaN(u.getTime()) ? new Date().toISOString() : u.toISOString(),
        chips
      };
    }

    // Admin wiring
    els.adminToggleBtn.addEventListener("click", () => {
      const p = els.adminPanel;
      const open = !p.classList.contains("open");
      p.classList.toggle("open", open);
      p.setAttribute("aria-hidden", String(!open));
    });
    els.addChipBtn.addEventListener("click", () => {
      state = { ...state, chips: (state.chips || []).concat(["New tag"]) };
      render(state);
    });
    els.clearChipsBtn.addEventListener("click", () => { state = { ...state, chips: [] }; render(state); });
    els.applyBtn.addEventListener("click", () => { state = collectFromAdmin(); render(state); });
    els.makeJsonBtn.addEventListener("click", () => { els.exportBox.value = JSON.stringify(collectFromAdmin(), null, 2); });
    els.copyJsonBtn.addEventListener("click", async () => {
      try{
        if(!els.exportBox.value) els.makeJsonBtn.click();
        await navigator.clipboard.writeText(els.exportBox.value);
        els.copyJsonBtn.textContent = "Copied!"; setTimeout(()=>els.copyJsonBtn.textContent="Copy to clipboard",1200);
      }catch{ alert("Could not copy. Select and copy manually."); }
    });

    // status.json loader
    async function loadStatusJson() {
      try {
        const res = await fetch("status.json?ts="+Date.now(), { cache:"no-store" });
        if (!res.ok) throw new Error("HTTP " + res.status);
        const data = await res.json();
        const safe = {
          answer: typeof data.answer === "string" ? data.answer : defaults.answer,
          message: typeof data.message === "string" ? data.message : defaults.message,
          updated: typeof data.updated === "string" ? data.updated : (new Date()).toISOString(),
          chips: Array.isArray(data.chips) ? data.chips.map(String) : defaults.chips
        };
        state = safe;
      } catch {
        state = { ...defaults };
      } finally {
        render(state);
      }
    }

    // Refresh button
    els.refreshBtn.addEventListener("click", loadStatusJson);

    // Boot
    loadStatusJson();

    // Smoothly keep "Updated‚Ä¶" relative
    setInterval(() => { els.updatedEl.textContent = fmtWhen(state.updated); }, 30000);
    (async () => {
        try {
          // Example static parameters ‚Äî you can later wire these to real signals
          const res = await fetch(
            '/.netlify/functions/ai-vibe?weather=sunny&spotify=Synthwave&sleep=7.2h',
            { cache: 'no-store' }
          );
          const data = await res.json();
          if (data.vibe) {
            document.getElementById('message').textContent = data.vibe;
          }
        } catch (err) {
          console.debug('AI vibe fetch failed, using fallback.', err);
        }
      })();
    })();
    </script>
  </body>
  </html>
